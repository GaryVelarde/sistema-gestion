<div class="grid" #cardBody>
  <div class="col-12">
    <p-card>
      <p-toolbar class="mt-3">
        <div class="p-toolbar-group-left">
          <button type="button" pButton icon="pi pi-plus" label="Añadir Evento"
            (click)="newEventDialog=true"></button>
        </div>

        <div class="p-toolbar-group-right">
          <p style="margin: 0 1rem 0 0;">Ver en intervalos de</p>
          <form [formGroup]="slotDurationForm">

            <p-dropdown
              formControlName="slotDuration"
              [options]="timeslots"
              optionLabel="name" />
          </form>
        </div>
      </p-toolbar>
      <full-calendar
        class="mt-4"
        #calendar
        [options]="calendarOptions"
        [events]="events"></full-calendar>
    </p-card>
  </div>
</div>

<p-dialog header="Detalle del Evento"
  [style]="{ width: '100rem', height: '100rem' }"
  [(visible)]="showEventDetailDoalog" [modal]="true" [closable]="true"
  [maximizable]="true">
  <full-calendar
    class="mt-4"
    #calendarDetail
    [options]="calendarOptionsDetail"></full-calendar>
</p-dialog>

<p-sidebar [(visible)]="newEventDialog" [style]="{'width': '40%'}" position="right">
  <ng-template pTemplate="header">
      <span class="font-semibold text-xl">Agendar una nueva reunión</span>
  </ng-template>
  <div class="content">
    <form [formGroup]="eventForm">
      <div class="p-fluid grid field mt-4">
        <p-floatLabel class="col-8">
          <input id="title" type="text" pInputText formControlName="title" />
          <label for="title">Título</label>
        </p-floatLabel>
        <div class="col-4 d-flex m-auto">
          <p-colorPicker formControlName="color" />
          <p class="m-auto">Color del evento</p>
          
        </div>
      </div>
      <div class="p-fluid grid field mt-5">
        <div class="field col-12 md:col-12">
          <span class="p-float-label">
              <textarea
                  formControlName="description"
                  inputId="textarea"
                  rows="4"
                  cols="30"
                  pInputTextarea></textarea>
              <label for="textarea">Descripción</label>
          </span>
        </div>
      </div>
      <div class="p-fluid field mt-1">
        <p-floatLabel class="col-12">
          <input id="title" type="text" pInputText formControlName="eventLink" />
          <label for="title">Url de la reunión (opcional)</label>
        </p-floatLabel>
      </div>
      <div class="grid p-fluid field mt-1">
        <div class="col-6">
          <p>Inicio</p>
          <p-calendar
                formControlName="start"
                [iconDisplay]="'input'"
                [showIcon]="true"
                [showTime]="true" 
                [hourFormat]="12"
                dateFormat="dd-mm-yy"></p-calendar>
        </div>
        <div class="col-6">
          <p>Fin</p>
          <p-calendar
                formControlName="end"
                [iconDisplay]="'input'"
                [showIcon]="true"
                [showTime]="true" 
                [hourFormat]="12"
                dateFormat="dd-mm-yy"></p-calendar>
        </div>
      </div>
        <div class="footer">
          <button
            pButton
            pRipple
            label="Regresar"
            icon="pi pi-angle-left"
            class="p-button-text"
            iconPos="left"
            (click)="newEventDialog=false"></button>
  
          <p-button label="Registrar" iconPos="right"
            icon="pi pi-check"
            [disabled]="eventForm.invalid"
            (click)="addEvent()" />
        </div>
    </form>
  </div>
</p-sidebar>